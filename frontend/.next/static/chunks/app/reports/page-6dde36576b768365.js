(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{8831:function(e,t,s){Promise.resolve().then(s.bind(s,1450))},1450:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437),a=s(2265),l=s(6463),n=s(1270),o=s(9391);function i(){let{userInfo:e}=(0,n.a)(),t=(0,l.useRouter)(),[s,i]=(0,a.useState)([]),[u,d]=(0,a.useState)([]),[c,h]=(0,a.useState)(!0),[x,g]=(0,a.useState)("");return((0,a.useEffect)(()=>{if(!e){t.push("/login?redirect=/reports");return}(async()=>{try{let[e,t]=await Promise.all([o.Z.get("/reports/daily-revenue"),o.Z.get("/reports/sales-by-category")]);i(e.data),d(t.data)}catch(e){console.error("Failed to fetch reports:",e),g("Could not load report data. Please try again later.")}finally{h(!1)}})()},[e,t]),c)?(0,r.jsx)("p",{children:"Loading reports..."}):x?(0,r.jsx)("p",{style:{color:"red"},children:x}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Business Reports"}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg mb-8 shadow-sm border border-gray-100",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Daily Revenue (Last 7 Days)"}),s.length>0?(0,r.jsx)("ul",{className:"divide-y divide-gray-100",children:s.map(e=>(0,r.jsxs)("li",{className:"flex justify-between py-2 text-sm text-gray-700",children:[(0,r.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),(0,r.jsxs)("strong",{children:["$",parseFloat(e.revenue).toFixed(2)]})]},e.date))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No revenue data available."})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Total Sales by Category"}),u.length>0?(0,r.jsx)("ul",{className:"divide-y divide-gray-100",children:u.map(e=>(0,r.jsxs)("li",{className:"flex justify-between py-2 text-sm text-gray-700",children:[(0,r.jsx)("span",{children:e._id}),(0,r.jsxs)("strong",{children:["$",e.totalSales.toFixed(2)]})]},e._id))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No category sales data available."})]})]})}},1270:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return i}});var r=s(7437),a=s(2265),l=s(6463);let n=(0,a.createContext)(null),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)(null),i=(0,l.useRouter)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("userInfo");e&&o(JSON.parse(e))},[]),(0,r.jsx)(n.Provider,{value:{userInfo:s,login:e=>{localStorage.setItem("userInfo",JSON.stringify(e)),o(e),i.push("/")},logout:()=>{localStorage.removeItem("userInfo"),o(null),i.push("/login")}},children:t})},i=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9391:function(e,t,s){"use strict";let r=s(8472).Z.create({baseURL:"http://localhost:5001/api"});r.interceptors.request.use(e=>{{let t=localStorage.getItem("userInfo");if(t){let{token:s}=JSON.parse(t);s&&(e.headers.Authorization="Bearer ".concat(s))}}return e}),t.Z=r}},function(e){e.O(0,[236,971,23,744],function(){return e(e.s=8831)}),_N_E=e.O()}]);