(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1611:function(e,t,r){Promise.resolve().then(r.bind(r,311))},7138:function(e,t,r){"use strict";r.d(t,{default:function(){return u.a}});var n=r(231),u=r.n(n)},311:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437),u=r(2265),s=r(7138),o=r(6463),a=r(1270),l=r(9391);function i(){let[e,t]=(0,u.useState)(""),[r,i]=(0,u.useState)(""),[c,d]=(0,u.useState)(""),{login:f}=(0,a.a)(),h=(0,o.useRouter)(),g=(0,o.useSearchParams)(),m=async t=>{t.preventDefault(),d("");try{let{data:t}=await l.Z.post("/auth/login",{email:e,password:r});f(t);let n=g.get("redirect")||"/";h.push(n)}catch(e){var n,u;d((null===(u=e.response)||void 0===u?void 0:null===(n=u.data)||void 0===n?void 0:n.message)||"Failed to login")}};return(0,n.jsxs)("form",{onSubmit:m,className:"max-w-sm mx-auto p-6 bg-white rounded-lg shadow-md space-y-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Login"}),c&&(0,n.jsx)("p",{className:"text-red-600 text-sm text-center",children:c}),(0,n.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("input",{type:"password",placeholder:"Password",value:r,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors duration-200 shadow",children:"Login"}),(0,n.jsxs)("p",{className:"mt-4 text-center text-sm",children:["New user?"," ",(0,n.jsx)(s.default,{href:"/register",className:"text-blue-600 hover:underline",children:"Register here"})]})]})}},1270:function(e,t,r){"use strict";r.d(t,{H:function(){return a},a:function(){return l}});var n=r(7437),u=r(2265),s=r(6463);let o=(0,u.createContext)(null),a=e=>{let{children:t}=e,[r,a]=(0,u.useState)(null),l=(0,s.useRouter)();return(0,u.useEffect)(()=>{let e=localStorage.getItem("userInfo");e&&a(JSON.parse(e))},[]),(0,n.jsx)(o.Provider,{value:{userInfo:r,login:e=>{localStorage.setItem("userInfo",JSON.stringify(e)),a(e),l.push("/")},logout:()=>{localStorage.removeItem("userInfo"),a(null),l.push("/login")}},children:t})},l=()=>{let e=(0,u.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9391:function(e,t,r){"use strict";let n=r(8472).Z.create({baseURL:"http://localhost:5001/api"});n.interceptors.request.use(e=>{{let t=localStorage.getItem("userInfo");if(t){let{token:r}=JSON.parse(t);r&&(e.headers.Authorization="Bearer ".concat(r))}}return e}),t.Z=n}},function(e){e.O(0,[236,231,971,23,744],function(){return e(e.s=1611)}),_N_E=e.O()}]);