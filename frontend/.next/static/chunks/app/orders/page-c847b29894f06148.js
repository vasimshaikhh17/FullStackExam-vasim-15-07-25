(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{6421:function(e,t,s){Promise.resolve().then(s.bind(s,1732))},1732:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437),a=s(2265),n=s(6463),l=s(1270),o=s(9391);function i(){let{userInfo:e}=(0,l.a)(),t=(0,n.useRouter)(),[s,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{if(!e){t.push("/login");return}(async()=>{try{let{data:e}=await o.Z.get("/orders/my-orders");i(e)}catch(e){console.error("Failed to fetch orders",e)}finally{u(!1)}})()},[e,t]),c)?(0,r.jsx)("p",{children:"Loading your orders..."}):(0,r.jsxs)("div",{className:"max-w-3xl mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"My Orders"}),0===s.length?(0,r.jsx)("p",{className:"text-gray-600",children:"You have no past orders."}):(0,r.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Order ID:"})," ",e.id]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(0,r.jsx)("strong",{children:"Date:"})," ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Total:"})," $",parseFloat(e.totalAmount).toFixed(2)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(0,r.jsx)("strong",{children:"Status:"})," ",e.status]})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:e.OrderItems.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-700",children:[(0,r.jsxs)("span",{children:[e.productName," (x",e.quantity,")"]}),(0,r.jsxs)("span",{children:["$",(parseFloat(e.price)*e.quantity).toFixed(2)]})]},t))})]},e.id))})]})}},1270:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return i}});var r=s(7437),a=s(2265),n=s(6463);let l=(0,a.createContext)(null),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)(null),i=(0,n.useRouter)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("userInfo");e&&o(JSON.parse(e))},[]),(0,r.jsx)(l.Provider,{value:{userInfo:s,login:e=>{localStorage.setItem("userInfo",JSON.stringify(e)),o(e),i.push("/")},logout:()=>{localStorage.removeItem("userInfo"),o(null),i.push("/login")}},children:t})},i=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9391:function(e,t,s){"use strict";let r=s(8472).Z.create({baseURL:"http://localhost:5001/api"});r.interceptors.request.use(e=>{{let t=localStorage.getItem("userInfo");if(t){let{token:s}=JSON.parse(t);s&&(e.headers.Authorization="Bearer ".concat(s))}}return e}),t.Z=r}},function(e){e.O(0,[236,971,23,744],function(){return e(e.s=6421)}),_N_E=e.O()}]);